<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <link rel="stylesheet" href="/static/css/styles.css">
  <body>


  <template id="template-home">
    <!-- <div class="background"> -->
    <div class="container mt-5 p-3">
        <div class="p-4 text-center mb-4 text-dark border bg-white rounded-3 shadow-sm"> 
          <h1 class="h1 mb-4">Welcome to our transcendence project</h1>
          <h2 class="h4 mb-3">‚ú©‚ü£  a two-player pong game  ‚ü¢‚ú©</h2>
          <h2 class="h6 mb-5">made by Garance, Claire, Orlando and Ma√´lle</h2>
          <div class="d-flex justify-content-center gap-3">
            <a id="loginLink" class="btn btn-outline-info-custo">Login</a>
            <a id="registerLink" class="btn btn-outline-info-custo">Create a profile</a>
          </div>
      </div>
    </div>
    <div class="container mt-5 p-3">
	  <div class="d-flex justify-content-center">
		<div class="square-container text-center text-dark border bg-white rounded-3 shadow-sm p-3 px-3">
		  <div id="ball-anim-home" class="bg-light" style="width:90%; height:90%;"></div>
  
			  <!-- <img src="static/css/ball.gif" alt="Centered Image" class="img-fluid rounded" style="max-width: 100%; height: auto;"> -->
		</div>
      </div>
	</div>
	<!-- <script type="module" src="/static/js/anim_home.js"></script> -->
    <!-- </div> -->
  </template>

  <template id="template-nav-bar">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">

		  <a id="homeLink" class="navbar-brand" style="cursor:pointer;">üè° Home</a>
	  

          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
      

          <div class="collapse navbar-collapse" id="navbarSupportedContent">

			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
			  <li class="nav-item">
				<a id="gameLink" class="nav-link" style="cursor:pointer;">üéÆ Play</a>
			  </li>
			  <li class="nav-item">
				<a id="profileLink" class="nav-link" style="cursor:pointer;">üë§ My Profile</a>
			  </li>
			  <li class="nav-item">
				<a id="chatLink" class="nav-link" style="cursor:pointer;">üí¨ Chat</a>
			  </li>
			  <li class="nav-item">
				<a id="statsLink" class="nav-link" style="cursor:pointer;">üìä Statistics</a>
			  </li>
			</ul>
	  

            <ul class="navbar-nav">
              <li class="nav-item">
                <a id="buttonLogout" class="nav-link" style="cursor:pointer;">üö™ Logout</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
  </template>

  <template id="template-home-connected">
    <div class="container mt-5 p-3">
        <div class="p-4 text-center mb-4 text-dark border bg-white rounded-3 shadow-sm"> 
          <h1 class="h1 mb-4">Welcome to our transcendence project</h1>
          <h2 class="h4 mb-3">‚ú©‚ü£  a two-player pong game  ‚ü¢‚ú©</h2>
          <h2 class="h6 mb-5">made by Garance, Claire, Orlando and Ma√´lle</h2>
      </div>
    </div>
    <div class="container mt-5 p-3">
      <div class="d-flex justify-content-center">
        <div class="square-container text-center text-dark border bg-white rounded-3 shadow-sm p-3 px-3">
			<div id="ball-anim-home" class="bg-light" style="width:90%; height:90%;"></div>

			<!-- <img src="static/css/ball.gif" alt="Centered Image" class="img-fluid rounded" style="max-width: 100%; height: auto;"> -->
        </div>
      </div>
    </div>

	<!-- <script type="module" src="/static/js/anim_home.js"></script> -->


  </template>

    <div id="app"></div>

  <!-- <template id="template-index">
    <div class="container mt-5 p-3">
      <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow-sm p-4">
              <h2 class="text-center h4 mb-5">Menu</h2>
                   
                <a href="/game" class="btn btn-primary-cyan w-100 mb-4">Play</a>

                <a href="/profile" class="btn btn-primary-cyan w-100 mb-4">Profile</a>

                <a href="/chat/public" class="btn btn-primary-cyan w-100 mb-4">Chat</a>
              
                <a id="buttonLogout" class="btn btn-primary-cyan w-100 mb-4">Log out</a>
          </div>
        </div>
      </div>
    </div>
  </template> -->


  <template id="template-login">
    <div class="login-overlay">
      <div class="container mb-5 p-3">
      <div class="row justify-content-center">
          <div class="col-md-6 col-lg-5">
              <div class="card shadow-sm p-4">
                  <h2 class="text-center h4 mb-4">Connect to pong</h2>
                    <form method="POST" id="login-form">
                      
                      <div class="mb-3">
                        <label for="login-username" class="form-label">Username:</label>
                        <input type="text" class="form-control" name="username" id="login-username"/>
                      </div>
                      
                      <div class="mb-4">
                        <label for="login-password" class="form-label">Password:</label>
                        <input type="password" class="form-control" name="password" id="login-password"/>
                      </div>
                    
                      <button type="submit" class="btn btn-primary-cyan w-100 mb-3">Sign in</button>

                    </form>
                    
                    <button id="login-42" class="btn btn-primary-cyan w-100" onclick="window.location.href='/backend/authent/authorize42/'">Login with 42</button>
                  
                    <div class="text-center mt-2">            
                      <small>Not register yet? <a id="registerLink2" 
                        style="
                        color: #007bff; 
                        text-decoration: none; 
                        font-weight: 500; 
                        cursor: pointer;
                      " 
                      onmouseover="this.style.textDecoration='underline'; this.style.color='#0056b3';" 
                      onmouseout="this.style.textDecoration='none'; this.style.color='#007bff';">
                        Register here</a></small>                  
                    </div>
					<div class="text-center mt-2">
						<button id="homeButton" class="btn btn-secondary-custo w-50 mt-4">üè° Home</button>
					</div>			
          </div>
        </div>

        <!-- window asking to double auth code  -->
        <div id="doubleAuthCode" style="display: none;">	
          <div id="doubleAuthCodeDiv" class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;">
            <div class="bg-white rounded shadow p-4 text-center" style="min-width: 300px;">
              <div class="mb-3">
                <form method="POST" id="code-form">
                  <!-- <label for="code-form" class="form-label">Enter your verification code:</label> -->
				  <label class="form-label">Enter your verification code:</label>
                  <input type="text" class="form-control" name="code-doubleauth" id="code-doubleauth"/>
                  <button type="submit" class="btn btn-primary-cyan w-100 mt-2 mb-3">Ok</button>
                </form>
              </div>
            </div>
          </div>
        </div>


      </div>
      </div>
    </div>
  </template>

    <template id="template-register">
    <div class="login-overlay">
      <div class="container mt-5 p-3">
        <div class="row justify-content-center">
          <div class="col-md-6 col-lg-5">
            <div class="card shadow-sm p-4">
              <h2 class="text-center h4 mb-4">Create your profile</h2>
              <form method="POST" id="register-form">
                  <div class="mb-3">
                      <label for="register-username" class="form-label">Username*:</label>
                      <input 
					  type="text" 
					  class="form-control" 
					  name="username" 
					  id="register-username" required
					  pattern="[A-Za-z]{3,20}" 
					  title="Username must be between 3 and 20 characters long, with only letters">
                  </div>

                  <div class="mb-3">
                      <label for="register-email" class="form-label">Email*:</label>
                      <input type="email" class="form-control" name="email" id="register-email" required>
                  </div>

                  <div class="mb-3">
                      <label for="register-password" class="form-label">Password*:</label>
                      <!-- <input type="password" class="form-control" name="password" id="register-password" required> -->
                      <input 
                      type="password" 
                      class="form-control" 
                      name="password" 
                      id="register-password" 
                      required 
                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^\w\s])[A-Za-z\d\W]{9,25}"
                      title="Password must be between 9 and 25 characters long, with at least one uppercase letter, one lowercase letter, one digit, and one special character.">
                  </div>

                  <div class="mb-4">
                      <label for="register-password-confirmation" class="form-label">Password confirmation*:</label>
                      <input type="password" class="form-control" name="password-confirmation" id="register-password-confirmation" required>
                  </div>

                  <button type="submit" class="btn btn-primary-cyan w-100">Sign up</button>
              </form>

              <div class="text-center mt-2">
                  <small>Already have an account? <a id="loginLink2"
                    style="
                        color: #007bff; 
                        text-decoration: none; 
                        font-weight: 500; 
                        cursor: pointer;
                      " 
                      onmouseover="this.style.textDecoration='underline'; this.style.color='#0056b3';" 
                      onmouseout="this.style.textDecoration='none'; this.style.color='#007bff';">
                    Log in now</a></small>
              </div>
			  <div class="text-center mt-2">
				<button id="homeButton" class="btn btn-secondary-custo w-50 mt-4">üè° Home</button>
			  </div>					
          </div>
        </div>
      </div>
    </div>
  </div>
</template>


    <template id="template-profile">
      <div class="container mt-5">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm p-4">
              <h1 class="text-center mb-4">Profile</h1>
              
              <!-- Profile Picture -->
              <div class="text-center mb-4">
                <img id="image" src="" alt="Profile Picture" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
              </div>
              
              <!-- Profile Information -->
              <div class="mb-3">
                <h5 class="fw-bold">Username:</h5>
                <div id="username" class="text-muted"></div>
              </div>
              <div class="mb-3">
                <h5 class="fw-bold">Pseudo:</h5>
                <div id="pseudo" class="text-muted"></div>
              </div>
              <div class="mb-3">
                <h5 class="fw-bold">Email:</h5>
                <div id="email" class="text-muted"></div>
              </div>
              <div class="mb-3">
                <h5 class="fw-bold">Status:</h5>
                <div id="status" class="text-muted"></div>
              </div>
              <div class="mb-3">
                <h5 class="fw-bold">Bio:</h5>
                <div id="bio" class="text-muted"></div>
              </div>

              <div class="mb-3">
                <h5 class="fw-bold">Games played :</h5>
                <div id="games_count" class="text-muted"></div>
              </div>
              <div class="mb-3">
                <h5 class="fw-bold">Victories :</h5>
                <div id="victories_count" class="text-muted"></div>
              </div>
              <!-- games played : <div id="games_count"> </div><br> -->
              <!-- victories : <div id="victories_count"> </div><br> -->
              
              <!-- Back to Index Button -->
              <div class="text-center mt-4 d-flex justify-content-center gap-3">
                <a id="editProfileLink" class="btn btn-outline-primary w-100">Edit profile</a>
                <a id="homeLinkProfile" class="btn btn-outline-primary w-100">Go back to home</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>


    <template id="template-editprofile">
      <div class="container mt-5">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm p-4">
              <h1 class="text-center mb-4">Edit Profile</h1>
    
              <!-- Profile Picture -->
              <div class="text-center mb-4">
                <img id="image" src="" alt="Profile Picture" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
                <a id="choose-profile-picture" class="btn btn-link">Choose Profile Picture</a>
              </div>
              
              <!-- Modal for Profile Picture Selection -->
              <div class="modal fade" id="profilePictureModal" tabindex="-1" aria-labelledby="profilePictureModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="profilePictureModalLabel">Choose Profile Picture</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class="row g-2" id="profile-picture-options">
                      
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                      <button type="button" id="confirm-profile-picture" class="btn btn-primary">Choose</button>
                    </div>
                  </div>
                </div>
              </div>
    
              <!-- Editable Profile Information -->
              <form id="edit-profile-form">
                <div class="mb-3">
                  <h5 class="fw-bold">Username:</h5>
                  <div id="username" class="text-muted"></div>
                </div>
                <div class="mb-3">
                  <label for="pseudo" class="form-label fw-bold">Pseudo:</label>
                  <input type="pseudo" id="pseudo" name="pseudo" class="form-control" placeholder="Enter your pseudo">
                </div>                
                <div class="mb-3">
                  <h5 class="fw-bold">Email:</h5>
                  <div id="email" class="text-muted"></div>
                </div>                
                <!-- <div class="mb-3">
                  <label for="status" class="form-label fw-bold">Status:</label>
                  <input type="status" id="status" name="status" class="form-control" placeholder="Enter your status">
                </div> -->
                <div class="mb-3">
                  <label for="status" class="form-label fw-bold">Status:</label>
                  <select id="status" name="status" class="form-select">
                    <option value="" disabled selected>Select your status</option>
                    <option value="available">Available</option>
                    <option value="busy">Busy</option>
                    <option value="absent">Absent</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="bio" class="form-label fw-bold">Bio:</label>
                  <input type="bio" id="bio" name="bio" class="form-control" placeholder="Write something about u">
                </div>    
                <!-- Action Buttons -->
                <div class="text-center mt-4 d-flex justify-content-center gap-3">
                  <button type="submit" class="btn btn-primary">Save Changes</button>
                  <a id="homeLinkProfile" class="btn btn-outline-secondary">Go back to home</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </template>

    <!-- <template id="template-chat">
      <head>
        <meta charset="utf-8"/>
        <title>Chat Rooms</title>
      </head>
      <body>
            What chat room would you like to enter?<br>
            <input id="room-name-input" type="text" size="100"><br>
            <input id="room-name-submit" type="button" value="Enter">
        </body>
    </template> -->


      
      <template id="template-room">
		<div class="container-fluid mt-5">
			<div class="row justify-content-center g-3">

				<!-- Friend window -->
				
				<div id="friends-users" class="col-lg-2">
					<div class="card shadow-sm h-100">
						<div class="card-header bg-info text-white text-center">
							<h5 class="m-0">Friends</h5>
						</div>
						<div class="card-body">
							<p class="text-muted text-center">To add friends, open a private chat with the user and click the "Add as Friend" button.</p>
							<!-- <div id="send_friends" class="list-group text-center mt-3"></div> -->
							<div id="receive_friends" class="list-group text-center mt-3"></div>
							<div id="friends" class="list-group text-center mt-3"></div>
						</div>
					</div>
					<div id="FriendInvit" style="display: none;">	
						<div id="FriendInvitDiv" class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;">
							<div class="bg-white rounded shadow p-4 text-center" style="min-width: 300px;">
								<div id="invitationFriend" class="mb-3 fw-bold"></div>
								<button id="acceptFriend" class="btn btn-outline-info-custo me-2">Accept</button>
								<button id="declineFriend" class="btn btn-outline-info-custo">Decline</button>
							</div>
						</div>
					</div>

				</div>




				<div class="col-lg-8">
					<div class="card shadow-sm h-100">

						<div class="card-header bg-info text-white">
							<h5 id="chat-room-name" class="m-0">Public Chat Room  üë•üí¨</h5>
							<h5 id="chat-room-private" class="m-0"></h5>
						</div>


				
							<!-- Private chat button and stuff -->
							<div class="ms-2 d-flex justify-content-between ms-2">
								<div id="privateOptions" class="d-flex gap-2" style="display: none;"></div>
								<div id="privateOptionsRight" class="d-flex gap-2" style="display: none;"></div>
							</div>
								<!-- <textarea id="chat-log" cols="100" rows="20" readonly></textarea><br>
								<input id="chat-message-input" type="text" size="100"><br>
								<input id="chat-message-submit" type="button" value="Send"> -->
								
							<div class="card-body p-3 bg-light user-container">
							
								<div id="chat-log" class="chat-log flex-grow-1 p-3 mb-2 border rounded bg-white overflow-auto" style="height: 60vh;"></div>
								
								<input id="chat-message-input" type="text" class="form-control" placeholder="Type your message..." >
								
								<input id="chat-message-submit" class="btn btn-outline-info-custo mt-2 mb-0" type="button" value="Send" >
								
								
								
								<!-- <div id="GameInvit" style="display: none;">
									
									<div id="invitation" type="text" value=""></div>
									<div>xx invite you to play !</div>
									<button id="accept" class="btn btn-outline-info-custo">Accept</button>
									<button id="decline" class="btn btn-outline-info-custo">Decline</button>
								</div> -->
								
								<!-- <div id="GameInvit"  -->
									 <!-- class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;"> -->
								<div id="GameInvit" style="display: none;">	
									<div id="GameInvitDiv" class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;">
										<div class="bg-white rounded shadow p-4 text-center" style="min-width: 300px;">
											<div id="invitation" class="mb-3 fw-bold"></div>
											<button id="accept" class="btn btn-outline-info-custo me-2">Accept</button>
											<button id="decline" class="btn btn-outline-info-custo">Decline</button>
										</div>
									</div>
								</div>

                <!-- see profile of a user  -->
                <div id="profileUser" style="display: none;">
                  <div id="profileUserDiv" class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;">
                    <div class="container mt-5">
                      <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6">
                          <div class="card shadow-sm p-4">
                            <h1 class="text-center mb-4">Profile</h1>
                            
                            <!-- Profile Picture -->
                            <div class="text-center mb-4">
                              <img id="image" src="" alt="Profile Picture" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
                            </div>
                            
                            <!-- Profile Information -->
                            <div class="mb-3">
                              <h5 class="fw-bold">Username:</h5>
                              <div id="usernameOther" class="text-muted"></div>
                            </div>
                            <div class="mb-3">
                              <h5 class="fw-bold">Pseudo:</h5>
                              <div id="pseudoOther" class="text-muted"></div>
                            </div>
                            <!-- <div class="mb-3">
                              <h5 class="fw-bold">Email:</h5>
                              <div id="email" class="text-muted"></div>
                            </div> -->
                            <div class="mb-3">
                              <h5 class="fw-bold">Status:</h5>
                              <div id="statusOther" class="text-muted"></div>
                            </div>
                            <div class="mb-3">
                              <h5 class="fw-bold">Bio:</h5>
                              <div id="bioOther" class="text-muted"></div>
                            </div>
              
                            <div class="mb-3">
                              <h5 class="fw-bold">Games played :</h5>
                              <div id="games_countOther" class="text-muted"></div>
                            </div>
                            <div class="mb-3">
                              <h5 class="fw-bold">Victories :</h5>
                              <div id="victories_countOther" class="text-muted"></div>
                            </div>
                            <!-- games played : <div id="games_count"> </div><br> -->
                            <!-- victories : <div id="victories_count"> </div><br> -->
                            
                            <!-- Back to Index Button -->
                            <div class="text-center mt-4 d-flex justify-content-center gap-3">
                              <a id="closeProfileButton" class="btn btn-outline-primary w-100">Go back to chat</a>
                              <a id="homeButton" class="btn btn-outline-primary w-100">Go back to home</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                

							</div>



						</div>
					</div>

						<div id="available-users" class="col-lg-2">
							<div class="card shadow-sm h-100">
								<div class="card-header bg-info text-white text-center">
									<h5 class="m-0">Available Users</h5>
								</div>
								<div class="card-body justify-content-between d-flex flex-column">
									<p class="text-muted text-center">Select a user to start a private chat with them.</p>
									<div id="users" class="list-group"></div>
									<div id="backHomeAvailableUsers" class="list-group mt-auto"></div>
								</div>
							</div>
						</div>



				</div>
			</div>
    </template>

	<template id="template-game">
		
      <div class="container mt-5 mb-3">
		<div class="row justify-content-center">
		  <div class="col-md-8 col-lg-6">
			<div class="card shadow-sm p-4 bg-white">
            
		      <h1 class="h1 text-center text-dark">Time to play Pong !</h1>
			  <h1 id="rotating-star" class="rotating-star h1 text-center md-4" style="color:rgb(255, 248, 47)">‚ú©</h1>
              
			  			  

              <div id="gameTournamentSetup">
				<!-- setup1 -->
                <div id="layout" class="d-flex justify-content-center gap-3 mt-3">
                  <div class="d-flex justify-content-center mt-3">
                    <button type="button" id="game-button" class="btn btn-info-custo btn-lg">Play Pong</button>
                  </div>
                  <div class="d-flex justify-content-center mt-3">
                    <button type="button" id="tournament-button" class="btn btn-info-custo btn-lg">Play Pong Tournament</button>
                  </div>
                </div>
              </div>


              <div id="localRemoteSetup" style="display: none">
				<!-- set up 2 -->
                <div id="layout" class="d-flex justify-content-center gap-3 mt-3">
                  <div class="d-flex justify-content-center mt-3">
                    <button type="button" id="localgame-button" class="btn btn-info-custo btn-lg" >Local Game</button><br>
                  </div>
                  <div class="d-flex justify-content-center  mt-3">
                    <button type="button" id="remotegame-button" class="btn btn-info-custo btn-lg" >Remote Game</button>
                  </div>
                </div>
              </div>

              <div id="createJoinSetup" class="mb-4 justify-content-center" style="display: none">
				<!-- setup3 -->
                <div id="layout" class="d-flex justify-content-center gap-3 mt-5">
					
                  <div id="card-setup3" class="card shadow-sm  mb-3">
                    <div class="card-body">
  
                      <div class="input-group">
                        <input type="text" id="create-game" class="form-control" placeholder="Enter game name"	>					  

                        <button type="button" id="creategame-button" class="btn btn-outline-info-custo" disabled>Create Game</button>
                      </div>
                    </div>
                  </div>

                  <div  class="card shadow-sm  mb-3">
                    <div class="card-body">
                      <button type="button" id="joingame-button" class="btn btn-outline-info-custo">Join an existing Game</button>
                    </div>
                  </div>

				</div>
			  </div>

			<!-- This is shown after user clicked join existing game -->
			  <div id="setup4" class="mt-3 justify-content-center" style="display:none"></div>
	
			<!-- This is shown after user choose a game name and waiting for people to join -->
			  <div id="setup5" class="d-flex flex-column align-items-center gap-3 justify-content-center " style="display:none">
	
			    <h4 class="h4 text-center mt-2 mb-2 text-dark" id="game-name-box" style="display:none">Waiting for people to join the game :</h3>
			    <h2 class="h2 text-center mb-4 text-dark" id="game-name" style="display:none"></h2>
			    <div class="spinner-border text-info mb-4" id="game-name-spinning" role="status" style="display:none">
				  <span class="visually-hidden">Loading...</span>
			    </div>
			  </div>

              <!-- This is shown after user choose a tournament name and waiting for people to join -->
              <div id="setup5tournament" class="d-flex flex-column align-items-center gap-3 justify-content-center " style="display:none">
                
                <h4 class="h4 text-center mt-2 mb-2 text-dark" id="tournament-name-text" style="display:none">Waiting for people to join the tournament :</h3>
                <h2 class="h2 text-center mb-4 text-dark" id="tournament-name" style="display:none"></h2>
                <div class="spinner-border text-info mb-4" id="tournament-name-spinning" role="status" style="display:none">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </div>

              <div class="d-flex justify-content-center gap-3">
                <button id="home-button" class="btn btn-secondary-custo mt-5">üè° Home</button>
              </div>

			</div>
		  </div>
		</div>
      </div>

	  <div class="outer-container d-flex justify-content-center">
		<div id="container" class="position-relative border rounded p-3 bg-dark">

			<div class="line position-absolute" style="
			width: 2px; 
			height: 100%; 
			left: 50%; 
			top: 0; 
			background: repeating-linear-gradient(
				to bottom,
				#f8f9fa,
				#f8f9fa 7px, 
				transparent 7px,
				transparent 15px
			);"></div>
				
          <div id="paddle-left" class="paddles bg-light position-absolute" 
            style="width: 10px; height: 80px; left: 10px; top: calc(50% - 40px);"></div>
          <div id="paddle-right" class="paddles bg-light position-absolute" 
            style="width: 10px; height: 80px; right: 10px; top: calc(50% - 40px);"></div>
          <div id="ball" class="ball bg-light rounded-circle position-absolute" 
              style="width: 20px; height: 20px; top: calc(50% - 10px); left: calc(50% - 10px);"></div>
          <div class="d-flex justify-content-between mt-3">
            <div id="score-pl" class="score fs-6 fw-bold">Player 1: 0</div>
            <div id="score-pr" class="score fs-6 fw-bold">Player 2: 0</div>
          </div> 
      
          
		
		  <div id="victory" class="container text-center mt-4 w-50">
			  <div class="p-3">
				<div id="match-issue" class="h2 text-primary fw-bold mt-3"></div>
				<div id="match-emoji" class="h2 mb-3">‚ú®üèÖ‚ú®</div>				
			  </div>

				<button id="replay-btn" class="btn btn-primary-cyan justify-content-center w-50 mb-2">Replay</button>
				<button id="menu-btn" class="btn btn-secondary-custo w-50 mb-3">üè° Home</button>
          </div>

		
		  
          <div id="victory-tournament" class="text-center mt-4 w-50">
			<div class="p-3">
				<div id="match-issue-tournament" class="h2 text-primary fw-bold mt-3"></div>
				<div id="match-emoji" class="h2 mb-3">‚ú®üèÖ‚ú®</div>				
			</div>			
			<button id="menu-btn-tournament" class="btn btn-secondary-custo w-50 mb-3">üè° Home</button>
          </div>
	
        </div>
	    </div>

      <div id="CountDownWindow" style="display: none;">	
        <div id="CountDownDiv" class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100" style="display: none; background-color: rgba(255, 255, 255, 0.6); z-index: 1050;">
          <div class="bg-white rounded shadow p-4 text-center" style="min-width: 300px;">
            <div id="messageCountDown" type="text" class="mb-3 fw-bold"></div>
          </div>
        </div>
      </div>
    </template>

<!-- alert message :  -->

<template id="template-stats">

	<div class="container mt-5 ">
		<div class="text-center mb-4">
			<div class="p-5 text-center mb-4 text-dark border bg-white rounded-3 shadow-sm"> 
				<h2 class="mb-3">Statistics</h2>
				<div class="btn-group mb-3" role="group">
					<button type="button" class="btn btn-info-custo" id="mystats">My stats</button>
					<button type="button" class="btn btn-primary" id="globalstats">Global stats</button>
				</div>				
			


				<div id="statistics">
					<h2 id="glob-or-pers" class="text-center mt-3"></h2>
					<div id="rank" class="stats perso text-center mb-3 hidden" >Rank : </div>
					
					<h3 class="stats text-start hidden">Games History</h3>
					<div class="stats text-start mb-3 hidden">Ten latest games played :</div>

					<div class="row mb-2 perso hidden">
    					<div class="col-auto">
        					<div class="input-group">
								<select id="hist-dropdown" class="form-select">
									<option value="all-hist" selected>All</option>
									<option value="vic-hist">Victories Only</option>
									<option value="def-hist">Defeats Only</option>
								</select>
								<button id="update-hist" class="btn btn-outline-info-custo">Update History</button>
					
							</div>
						</div>
					</div>

					<div id="no-stats"></div>
					<div class="stats hidden">
						<table class="table table-striped table-hover border rounded">
							<thead>
								<tr>
									<th>ID</th>
									<th>Date</th>
									<th>Players</th>
									<th>Winner</th>
									<th>Final scores</th>
								</tr>
							</thead>
							<tbody id="history-body"></tbody>
						</table>


					</div>

					<div class="stats mb-2 perso hidden">
						<div class="row gx-3">

							<div class="col-md-6">
								<div class="border rounded p-3 shadow-sm">
									<div class="stats text-start  hidden">
										<div id="total-games" class="text-start mb-2">Total games played ever: </div>
									</div>
									<div class="stats perso text-start  hidden">
										<div id="total-vic">Total victories : </div>
										<div id="total-def">Total defeats : </div>
										<br>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border rounded p-3 shadow-sm">	
									<div class="stats text-start   hidden">
										<div id="total-tournaments"  class="text-start mb-2">Total tournaments played ever: </div>
									</div>


									<div class="stats perso text-start  hidden">
										<div id="total-vic-tourn">Total tournaments won : </div>
										<div id="total-def-tourn">Total tournaments lost : </div>
										<br>
									</div>
								</div>
							</div>
			
						</div>
					</div>

					
					<div class="stats global hidden">
						<div class="row gx-3">
							<div class="col-md-6">
								<div class="border rounded p-3 mb-2 shadow-sm">
								
								
								<h3>Top 3 Players</h3>
								<div>
									<canvas id="topThree" style="width: 200px; height:180px"></canvas>
								</div>
			
								</div>
							</div>

								<!-- <div class="stats global notourn hidden"> -->
									<div class="col-md-6">
										<div class="border rounded p-3 mb-2 shadow-sm">
											<h3>Top 3 Tournaments Winners</h3>
											<table class="table table-striped table-hover border rounded mt-2">
												<thead>
													<tr>
														<th>Rank</th> 
														<!-- ajouter emoji couronne  -->
														<th>Name</th>
														<th>Won tournaments</th>
													</tr>
												</thead>
												<tbody id="toptournusers-body"></tbody>
											</table>
										


										</div>
									</div>
								<!-- </div>					 -->
						</div>
					</div>

					<div class="stats global hidden">
						
						<h3>General ranking</h3>
						<table class="table table-striped table-hover border rounded">
							<thead>
								<tr>
									<th>Rank</th>
									<th>Name</th>
									<th>Victories</th>
								</tr>
							</thead>
							<tbody id="topusers-body"></tbody>
						</table>
						<br>
					</div>



					<div class="stats global hidden">
						<div class="border rounded p-3 shadow-sm">
							<h3 class="mb-3">Players' Activity</h3>
							<div class="row gx-3">
								<!-- Left canvas -->
								<div class="col-6 d-flex justify-content-center align-items-center">
									<canvas id="playersActivity" style="width: 150px; height:150px"></canvas>
								</div>
								<!-- Right canvas -->
								<div class="col-6 d-flex justify-content-center align-items-center">
									<canvas id="acti-distrib" style="width: 300px; height:300px"></canvas>
								</div>
							</div>
						</div>
					</div>
		
					<div class="stats perso hidden">
						<div class="row gx-3">
							<div class="col-md-6">
								<div class="border rounded p-3 mb-2 shadow-sm">
									<h3 class="text-center">Games Victories / Defeats</h3>
									<div class="d-flex justify-content-center">
										<canvas id="victory-percent" style="width: 150px; height:150px"></canvas>
									</div>
								</div>
							</div>

							
							<div class="col-md-6">
								<div class="border rounded p-3 shadow-sm">
									<h3 class="text-center">Tournaments Victories / Defeats</h3>
									<div class="d-flex justify-content-center">
										<canvas id="tourn-vic-percent" style="width: 150px; height:150px"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="stats perso hidden">
						<div class="row gx-3">
							<div class="col-md-6">
								<div class="border rounded p-3 shadow-sm"><h3>KOs inflicted</h3>
									<div class="row gx-3">
										<div class="col-md-6 d-flex justify-content-center">
											<canvas id="ko-vic" style="width: 150px; height:150px;"></canvas>
										</div>
										<div class="col-md-6 d-flex justify-content-center">
											<canvas id="ko-def" style="width: 150px; height:150px;"></canvas>
										</div>
									</div>
									
								</div>								
							</div>
						</div>
					</div>


		
				</div>
			</div>
		</div>
	</div>

</template>

  <div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="failToast" class="toast bg-danger-subtle text-black" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-danger-subtle text-black border-0">
        <strong class="me-auto">Error</strong>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
      
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="basicToast" class="toast bg-secondary-subtle text-black" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-seondary-subtle text-black border-0">
        <strong class="me-auto">Alert</strong>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
      
      </div>
    </div>
  </div>

<!-- page not found -->
<template id="template-not-found">
  <div class="container text-center">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6 mt-2">
        <div class="card shadow-sm">
          <div class="card-body">
            <h1 class="display-1 text-danger">404</h1>
            <h2 class="text-dark mb-3">Page Not Found</h2>
            <p class="text-muted mb-4">Sorry, the page you are looking for does not exist.</p>
            <button id="homeButton" class="btn btn-secondary-custo">üè° Home</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="/static/js/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- <script src="/static/bootstrap/js/bootstrap.bundle.min.js"></script> -->
  </body>
  </html>